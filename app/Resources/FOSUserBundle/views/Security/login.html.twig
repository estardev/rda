{% extends "FOSUserBundle::layout.html.twig" %}

{% trans_default_domain 'FOSUserBundle' %}

{% block javascripts %}
    {{parent()}}
    <script type="text/javascript" src="{{ asset('js/login.js', absolute=true) }}"></script>
{% endblock %}

{% block fos_user_content %}
{% if error %}
    <div>{{ error.messageKey|trans(error.messageData, 'security') }}</div>
{% endif %}

<div class="row">

    <div class="col-md-4">
        <h4 style="border-bottom: 1px solid #c5c5c5;">
            Scegli come accedere
        </h4>

        <div style="padding: 20px;">
            <p>
                <button id="btnLoginCredenziali" class="btn btn-primary btn-block">Accedi tramite Credenziali</button>
            </p>

            <p>
                <a class="btn btn-primary btn-block" title="Accedi all'area riservata tramite Smartcard Carta Operatore"
                   href="https://test.usl5.toscana.it/sclogin.php?urlok={{urlok}}&urlko={{urlko}}">
                    Accedi tramite Smartcard</a>
            </p>
        </div>
    </div>

    <div id="divLoginCredenziali" class="col-md-6 col-md-offset-2" style="display: none;">
        <h4 style="border-bottom: 1px solid #c5c5c5;">
            Accesso tramite Credenziali
        </h4>
        <div style="padding: 20px;">
            <form action="{{ path("fos_user_security_check") }}" method="post">
                <fieldset>
                    <input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />
                    <div class="form-group input-group">
                        <span class="input-group-addon">
                            <i class="glyphicon glyphicon-user"></i>
                        </span>
                        <input  class="form-control" placeholder="Username o E-mail" aria-describedby="basic-addon1" type="text" id="username" name="_username" value="{{ last_username }}" required="required" />
                    </div>
                    <div class="form-group input-group">
                        <span class="input-group-addon">
                            <i class="glyphicon glyphicon-lock"></i>
                        </span>
                        <input class="form-control" placeholder="Password" aria-describedby="basic-addon1" type="password" id="password" name="_password" required="required" />
                    </div>
                    <div class="form-group">
                        <button type="submit" id="_submit" class="btn btn-success btn-block" name="_submit" value="{{ 'Login'|trans }}" />
                            Accedi
                        </button>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>

</div>


{% endblock fos_user_content %}